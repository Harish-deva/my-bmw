document.body.addEventListener("mousedown",function(){document.body.classList.add("using-mouse")});document.body.addEventListener("keydown",function(b){"Tab"!==b.key&&9!==b.keyCode||document.body.classList.remove("using-mouse")});
(function(b,g,h){b.widget("xfaWidget.bfDropDownList",b.xfaWidget.dropDownList,{_widgetName:"bfDropDownList",options:{value:[],items:[],maxItems:-1,selectedItemsAlignment:"horizontal",editable:!1,placeholder:"",displayValue:[],required:!1,autocomplete:"off",multiSelect:!1,hasGroups:!1},AF_OPTGROUP_NAME:"afOptGroupName",buttonSkeleton:'\x3cbutton type\x3d"button" aria-haspopup\x3d"listbox"\x3e  \x3cdiv class\x3d"bfDropDownList__button-items"\x3e\x3c/div\x3e\x3c/button\x3e',listboxSkeleton:'\x3cdiv class\x3d"bfDropDownList__outer-container"\x3e  \x3cdiv class\x3d"bfDropDownList__inner-container"\x3e    \x3cdiv class\x3d"bfDropDownList__mobile-header"\x3e      \x3cspan class\x3d"bfDropDownList__mobile-placeholder"\x3e\x3c/span\x3e      \x3cdiv class\x3d"bfDropDownList__mobile-close"\x3e\x3c/div\x3e    \x3c/div\x3e    \x3cdiv class\x3d"bfDropDownList__scroll-container"\x3e       \x3cdiv class\x3d"bfDropDownList__height-helper"\x3e\x3c/div\x3e       \x3cul tabindex\x3d"-1" role\x3d"listbox" aria-labelledby\x3d""\x3e    \x3c/ul\x3e    \x3c/div\x3e  \x3c/div\x3e\x3c/div\x3e',
listItemSkeleton:'\x3cli data-user-option\x3d"true" role\x3d"option"\x3e\x3c/li\x3e',listGroupSkeleton:'\x3cli data-user-group\x3d"true" role\x3d"none"\x3e  \x3cspan role\x3d"menuitem" aria-haspopup\x3d"menu" aria-expanded\x3d"false"\x3e\x3c/span\x3e  \x3cdiv class\x3d"bfDropDownList__submenu-container"\x3e    \x3cul role\x3d"menu" aria-label\x3d""\x3e\x3c/ul\x3e  \x3c/div\x3e\x3c/li\x3e',listItemEmptySkeleton:'\x3cli data-empty-value\x3d"true" role\x3d"option"\x3e\x3c/li\x3e',buttonItemSkeleton:'\x3cdiv class\x3d"bfDropDownList__button-item"\x3e  \x3cspan class\x3d"bfDropDownList__button-item-remove"\x3e\x3c/span\x3e  \x3cspan class\x3d"bfDropDownList__button-item-text"\x3e\x3c/span\x3e\x3c/div\x3e',
PLACE_HOLDER_STYLE_CLASS:"guideFieldWidget--has-placeholder",$select:null,listbox:null,listboxButton:null,hasFocus:!1,openedSubmenu:null,updateScrollOnExpand:!1,getOptionsMap:function(){var a=b.xfaWidget.dropDownList.prototype.getOptionsMap.apply(this,arguments);return b.extend({},a,{value:function(d){this._setAriaValue(d);this.$select&&a.value.apply(Object.create(this,{$userControl:{value:this.$select}}),arguments)},items:function(d){this._setAriaItems(d);this.$select&&a.items.apply(Object.create(this,
{$userControl:{value:this.$select}}),arguments)},hasGroups:function(a){this.$userControl&&this.$userControl.attr("aria-haspopup",a?"menu":"listbox");this.listbox&&(this.listbox.hasGroups=a,b(this.listbox.listboxNode).toggleClass("bfDropDownList--hasGroups",a))},maxItems:function(a){this.listbox&&(this.listbox.maxItems=a)},selectedItemsAlignment:function(a){this.$userControl&&this.$userControl.toggleClass(".bfDropDownList--items-align-vertical","vertical"===a)},placeholder:function(a){b(".bfDropDownList__mobile-placeholder",
this.$userControl).text(a)},access:function(d){a.access.apply(this,arguments)},required:function(a){var d=b('[data-empty-value\x3d"true"]',this.listbox.listboxNode);this.options.multiSelect||a&&0<d.length?d.remove():a||0!==d.length||b(this.listItemEmptySkeleton).attr("id",g.uniqueId(this.$userControl.attr("id")+"_option")).prependTo(this.listbox.listboxNode)}})},getEventMap:function(){return{enterDropdown:[h.ut.XfaUtil.prototype.XFA_ENTER_EVENT,h.ut.XfaUtil.prototype.XFA_PREOPEN_EVENT],changeDropdown:h.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,
exitDropdown:h.ut.XfaUtil.prototype.XFA_EXIT_EVENT}},getCommitValue:function(){return b(".bfDropDownList__button-items",this.$userControl).children().map(function(){return b(this).data("save")}).toArray()},_createNewGroup:function(a,d,c,e){return d=a.display===this.AF_OPTGROUP_NAME||""===a.display?c:b(this.listGroupSkeleton).appendTo(c).children("[role^\x3dmenuitem]").attr("data-display",a.display).text(a.display).end().first().attr({id:g.uniqueId(e+"_optiongroup")}).end().find("ul").attr("aria-label",
a.display)},render:function(){var a=this.element.find("select").attr("id"),d=a+"_listbox",f=b(this.buttonSkeleton).attr({id:a,"aria-owns":d}).toggleClass("bfDropDownList--multiselect",this.options.multiSelect).toggleClass("bfDropDownList--items-align-vertical","vertical"===this.options.selectedItemsAlignment);this.options.autocomplete&&"off"!==this.options.autocomplete&&!this.options.multiSelect?this.$select=b.xfaWidget.dropDownList.prototype.render.apply(this,arguments).attr({autocomplete:this.option("autocomplete"),
tabindex:-1,"aria-hidden":"true"}).on("change",function(){var a=this.$select.val();this._setAriaValue(a,!0);this._updateButtonWithListboxValues();this.$userControl.trigger("changeDropdown")}.bind(this)):this.element.addClass(this._widgetName).children().remove();f.appendTo(this.element);var e=b(this.listboxSkeleton),l=b('[role\x3d"listbox"]',e).attr({id:d,"aria-labelledby":a});b(".bfDropDownList__mobile-placeholder",e).text(this.options.placeholder);this.options.multiSelect?l.attr("aria-multiselectable",
"true"):this.options.required||b(this.listItemEmptySkeleton).attr("id",g.uniqueId(a+"_option")).appendTo(l);var k=!1,m=l;g.each(this.options.items,function(d){var c=g.isString(d.save)?d.save:"";c===this.AF_OPTGROUP_NAME?(k=!0,m=this._createNewGroup(d,m,l,a)):b(this.listItemSkeleton).attr({id:g.uniqueId(a+"_option"),"data-save":c}).html('\x3cspan data-display\x3d"'+d.display+'"\x3e'+d.display+"\x3c/span\x3e").appendTo(m)},this);f.toggleClass("bfDropDownList--hasGroups",k);if(k||this.options.multiSelect)d=
this.options.multiSelect?"menuitemcheckbox":"menuitem",l.attr("role","menu"),b("[data-user-option\x3dtrue],[data-empty-item\x3dtrue]",l).attr("role",d);this.listbox=new c.Listbox(l.get(0),f.get(0));this.listbox.maxItems=this.options.maxItems;this.listboxButton=new c.ListboxButton(f.get(0),this.listbox);this.element.append(e);this._registerExternalFocusEvents();this._registerInternalFocusEvents(e);this._registerEvents(f);this.options.hasGroups=k;this._handleIFrame();return f},_registerExternalFocusEvents:function(){this.element.on("focusin.bfdropdown",
function(){this.hasFocus||(this.hasFocus=!0,this.$userControl.trigger("enterDropdown"))}.bind(this));this.element.on("focusout.bfdropdown",function(a){if(null===a.relatedTarget||0===b(a.relatedTarget).closest(this.element).length)this.listboxButton.hideListbox(a),this.hasFocus=!1,this.$userControl.trigger("exitDropdown")}.bind(this))},_registerInternalFocusEvents:function(a){a.on("mousedown.bfdropdown touchstart.bfdropdown mouse",function(a){0===b(a.target).closest(this.listbox.listboxNode.offsetParent).length&&
(a.preventDefault(),this.listboxButton.hideListbox(a),this.$userControl.focus())}.bind(this))},_registerEvents:function(a){this.listboxButton.setHandleValueChange(function(){var a=this._getListboxValues(),b=this.getCommitValue();this._arraySame(b,a)||(this.$select&&this.$select.val(a),this._updateButtonWithListboxValues(),this.$userControl.trigger("changeDropdown"))}.bind(this));b(".bfDropDownList__button-items",a).on("click.bfdropdown",".bfDropDownList__button-item",function(a){if(this.options.multiSelect){var d=
b(a.currentTarget).closest(".bfDropDownList__button-item"),c=d.data("save");(c=b("li",this.listbox.listboxNode).filter('[data-save\x3d"'+c+'"]').get(0))?this.listbox.toggleSelectItem(c):d.remove();a.stopPropagation()}}.bind(this));this.listbox.handleSubmenuOpen=this._handleSubmenuOpen.bind(this);this.listboxButton.handleExpandedChange=this._handleExpandedChange.bind(this);b(window).on("resize",g.debounce(function(){this._handleSubmenuOpen(this.openedSubmenu);this.listboxButton.isExpanded()?this.listbox.updateScroll(!0,
!0):this.updateScrollOnExpand=!0}.bind(this),200))},_handleSubmenuOpen:function(a){this.openedSubmenu=a;this._adjustHeight()},_handleExpandedChange:function(a){this._adjustHeight();if(a){var d=!1;this.options.multiSelect||(this.listbox.focusFirstSelectedItem(),d=!0);this.updateScrollOnExpand&&(this.updateScrollOnExpand=!1,d=!0);d&&this.listbox.updateScroll(!0,!0)}b("body").toggleClass("bfDropDownList--expanded",a);this._handlePosition()},_adjustHeight:function(){var a=this.openedSubmenu?this.openedSubmenu.scrollHeight:
"auto";b(".bfDropDownList__height-helper",this.element).height(a)},_handleIFrame:function(){window.parentIFrame&&1101>b(".aemformcontainer").width()&&(767<b(".aemformcontainer").width()?b(".bfDropDownList__outer-container").addClass("bfDropDownList__outer-container--overlay"):b(".bfDropDownList__outer-container").removeClass("bfDropDownList__outer-container--overlay"))},_handlePosition:function(){if(window.parentIFrame&&767>b(".aemformcontainer").width()){var a=b(this.element).find(".bfDropDownList__outer-container"),
d=b(this.element).find(".bfDropDownList__inner-container");window.parentIFrame.getPageInfo(function(c){c=c.scrollTop+c.windowHeight-d.height()-b("#aemFormFrame",parent.document).offset().top;b(a).css({top:"auto"});b(d).css({top:c,bottom:"initial"})})}},_updateButtonWithListboxValues:function(){if(this.$userControl){var a=this,d=!1,c=b(".bfDropDownList__button-items",this.$userControl);c.text("").children().remove();b(this.listboxButton.getSelected()).filter("[data-user-option]").each(function(){var f=
b(this),e=f.data("save");d=!0;b(a.buttonItemSkeleton).attr("data-save",e).children(".bfDropDownList__button-item-text").text(f.text()).end().appendTo(c)});d||c.text(this.options.placeholder);this.$userControl.toggleClass(this.PLACE_HOLDER_STYLE_CLASS,!d);var e=this;setTimeout(function(){e.$userControl.trigger("exitDropdown")},1E3)}},_getListboxValues:function(){var a=[];b(this.listboxButton.getSelected()).each(function(){var d=b(this);d.data("userOption")&&a.push(d.attr("data-save"))});return a},
_arraySame:function(a,b){g.isArray(a)||(a=[a]);g.isArray(b)||(b=[b]);return a.length===b.length&&0===g.difference(a,b).length},_setAriaValue:function(a,d){g.isArray(a)||(a=[a]);var c=this._getListboxValues();if(!this._arraySame(a,c)){var e=[],l=null;this.$userControl.toggleClass(this.PLACE_HOLDER_STYLE_CLASS,0===a.length||null==a[0]||""===a[0]);var k=b(".bfDropDownList__button-items",this.$userControl);k.text("").children().remove();var m=this.options.hasGroups||this.options.multiSelect?"aria-checked":
"aria-selected";b("[data-user-option]",this.listbox.listboxNode).each(function(d,c){d=b(c);var f=d.data("save");0<=a.indexOf(f)?(e.push(f),d.attr(m,"true"),b(this.buttonItemSkeleton).attr("data-save",f).children(".bfDropDownList__button-item-text").text(d.text()).end().appendTo(k),l=l||c):d.attr(m,"false")}.bind(this));this._updateAriaGroups();c=g.difference(a,e);0===a.length||null==a[0]||""===a[0]?(b("[data-empty-value]",this.listbox.listboxNode).attr(m,"true").each(function(a,b){this.listbox.focusItem(b)}.bind(this)),
k.text(this.options.placeholder)):0<c.length&&(b("[data-empty-value]",this.listbox.listboxNode).attr(m,"false"),c.forEach(function(a){b(this.buttonItemSkeleton).attr("data-save",a).children(".bfDropDownList__button-item-text").text(a).end().appendTo(k)}.bind(this)));this._applySelection(l,d)}},_setAriaItems:function(a){g.isArray(a)||(a=[a]);var d={};b(".bfDropDownList__button-items",this.$userControl).children().each(function(){var a=b(this);d[a.data("save")]=a});var c=b(this.listbox.listboxNode);
c.children("[data-user-option],[data-user-group]").remove();this._handleSubmenuOpen();var e=!1,l=c,k=this.$userControl.attr("id"),m=null;g.each(a,function(a){var f=g.isString(a.save)?a.save:"";if(f===this.AF_OPTGROUP_NAME)e=!0,l=this._createNewGroup(a,l,c,k);else{var x={id:g.uniqueId(k+"_option"),"data-save":f},q=b(this.listItemSkeleton).html('\x3cspan data-display\x3d"'+a.display+'"\x3e'+a.display+"\x3c/span\x3e");if(f=d[f])m=m||q[0],x["aria-selected"]="true",f.children(".bfDropDownList__button-item-text").text(a.display);
q.attr(x).appendTo(l)}},this);c.toggleClass("bfDropDownList--hasGroups",e);this.$userControl.attr("aria-haspopup",e||this.options.multiSelect?"menu":"listbox");(e||this.options.multiSelect)&&b('[role\x3d"option"]',c).each(function(a,c){a=b(c);a.attr({role:"menuitemcheckbox","aria-checked":"true"===a.attr("aria-selected")?"true":"false"}).removeAttr("aria-selected")}.bind(this));this.option("hasGroups",e);this._updateAriaGroups();this._applySelection(m);this.listboxButton.trackSelectionChange()},_applySelection:function(a,
c){this.listboxButton.isExpanded()&&this.multiSelect&&!c||!a||(a.parentElement!==this.listbox.listboxNode&&(c=b(a.parentElement).closest("li")[0],this.listbox.openSubmenu(c)),this.listbox.focusItem(a));this.listboxButton.isExpanded()?this.listbox.updateScroll(!0,!0):this.updateScrollOnExpand=!0},_updateAriaGroups:function(){if(this.options.multiSelect&&this.options.hasGroups){var a=b(this.listbox.listboxNode);b('[role\x3d"none"]',a).each(function(a,c){var d=!0,f=!0;a="mixed";b('[role\x3d"menuitemcheckbox"]',
c).each(function(a,c){a="true"===b(c).attr("aria-checked");d=d&&a;f=f&&!a});f?a="false":d&&(a="true");b(c).children('[role^\x3d"menuitem"]').attr({role:"menuitemcheckbox","aria-checked":a})}.bind(this))}}});var c={ListboxButton:function(a,c){this.button=a;this.listbox=c;this.currentSelection=this.getSelected();this.handleExpandedChange=function(){};this.handleValueChange=function(){};this.trackSelectionChange();this.registerEvents()}};c.ListboxButton.prototype.registerEvents=function(){this.button.addEventListener("click",
this.toggleListbox.bind(this));this.button.addEventListener("keydown",this.checkShow.bind(this));this.listbox.listboxNode.addEventListener("blur",this.hideListbox.bind(this));this.listbox.multiselectable||this.listbox.listboxNode.addEventListener("mouseup",this.handleMouseUp.bind(this));this.listbox.listboxNode.addEventListener("keydown",this.checkHide.bind(this));this.listbox.setHandleFocusChange(this.onFocusChange.bind(this))};c.ListboxButton.prototype.handleMouseUp=function(a){if(!this.listbox.multiselectable&&
a.target!==a.currentTarget){var c=b(a.target).closest("li").attr("role");if("option"===c||"menuitem"===c||"menuitemcheckbox"===c)a.preventDefault(),this.hideListbox(a),this.button.focus()}};c.ListboxButton.prototype.checkShow=function(a){var b=a.which||a.keyCode;if(b!==c.KeyCode.TAB)switch(b){case c.KeyCode.RETURN:case c.KeyCode.ESC:a.preventDefault();this.isExpanded()&&this.toggleListbox(a);break;case c.KeyCode.RIGHT:this.isExpanded()||(a.preventDefault(),this.listbox.checkKeyPress({which:c.KeyCode.DOWN,
preventDefault:function(){}}));break;case c.KeyCode.LEFT:this.isExpanded()||(a.preventDefault(),this.listbox.checkKeyPress({which:c.KeyCode.UP,preventDefault:function(){}}));break;case c.KeyCode.SPACE:this.toggleListbox(a);a.preventDefault();break;case c.KeyCode.UP:case c.KeyCode.DOWN:if(a.altKey){this.toggleListbox(a);a.preventDefault();break}else this.isExpanded()&&this.focusListboxNode();this.listbox.checkKeyPress(a);a.preventDefault();break;case c.KeyCode.PAGE_UP:case c.KeyCode.PAGE_DOWN:this.isExpanded()&&
this.focusListboxNode();this.listbox.checkKeyPress(a);a.preventDefault();break;default:var f=!1;"undefined"===typeof a.which?f=!0:"number"===typeof a.which&&0<a.which&&(f=b!==c.KeyCode.SHIFT&&!a.ctrlKey&&!a.metaKey&&!a.altKey);f&&(this.listbox.multiselectable&&this.showListbox(),this.listbox.checkKeyPress(a))}};c.ListboxButton.prototype.focusListboxNode=function(){if(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){var a=b(this.listbox.listboxNode).scrollParent()[0],c=a.scrollTop;
this.listbox.listboxNode.focus();a.scrollTop=c}};c.ListboxButton.prototype.checkHide=function(a){var b=!1;switch(a.which||a.keyCode){case c.KeyCode.UP:case c.KeyCode.DOWN:if(!a.altKey)break;b=!0;break;case c.KeyCode.RETURN:a.defaultPrevented||(b=this.listbox.isSelectionItemFocused(),a.preventDefault());break;case c.KeyCode.ESC:a.defaultPrevented||(b=this.listbox.isTopMenuFocused(),a.preventDefault());break;case c.KeyCode.TAB:b=!0}b&&(a.preventDefault(),this.button.focus(),this.hideListbox(a))};c.ListboxButton.prototype.getSelected=
function(){return this.listbox.getSelectedItems()};c.ListboxButton.prototype.trackSelectionChange=function(){var a=this.getSelected(),c=!1;if(this.currentSelection.length!==a.length)c=!0;else for(var b=0;b<a.length;b++)if(this.currentSelection[b]!==a[b]){c=!0;break}this.currentSelection=a;return c};c.ListboxButton.prototype.toggleListbox=function(a){a.preventDefault();this.isExpanded()?(this.hideListbox(a),this.button.focus()):this.showListbox(!0)};c.ListboxButton.prototype.isExpanded=function(){return"true"===
this.button.getAttribute("aria-expanded")};c.ListboxButton.prototype.showListbox=function(a){this.button.setAttribute("aria-expanded","true");a&&this.focusListboxNode();this.handleExpandedChange(!0)};c.ListboxButton.prototype.hideListbox=function(a){this.trackSelectionChange()&&this.handleValueChange();if("blur"!==a.type||a.relatedTarget!==this.button&&a.currentTarget!==b(a.relatedTarget).find("ul")[0])this.listbox.listboxNode.setAttribute("tabindex","-1"),this.button.removeAttribute("aria-expanded"),
this.handleExpandedChange(!1)};c.ListboxButton.prototype.onFocusChange=function(){this.trackSelectionChange()&&this.handleValueChange()};c.ListboxButton.prototype.setHandleValueChange=function(a){this.handleValueChange=a};c.KeyCode={BACKSPACE:8,TAB:9,RETURN:13,SHIFT:16,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};c.Utils=c.Utils||{};c.Utils.matches=function(a,b){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||
Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=a.parentNode.querySelectorAll(b);for(var c=b.length;0<=--c&&b.item(c)!==this;);return-1<c});return a.matches(b)};c.Utils.remove=function(a){return a.remove&&"function"===typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild&&"function"===typeof a.parentNode.removeChild?a.parentNode.removeChild(a):!1};c.Utils.isFocusable=function(a){if(0<
a.tabIndex||0===a.tabIndex&&null!==a.getAttribute("tabIndex"))return!0;if(a.disabled)return!1;switch(a.nodeName){case "A":return!!a.href&&"ignore"!==a.rel;case "INPUT":return"hidden"!==a.type&&"file"!==a.type;case "BUTTON":case "SELECT":case "TEXTAREA":return!0;default:return!1}};c.Utils.getAncestorBySelector=function(a,b){if(!c.Utils.matches(a,b+" "+a.tagName))return null;for(var d=null;null===d;)c.Utils.matches(a.parentNode,b)?d=a.parentNode:a=a.parentNode;return d};c.Utils.hasClass=function(a,
b){return(new RegExp("(\\s|^)"+b+"(\\s|$)")).test(a.className)};c.Utils.addClass=function(a,b){c.Utils.hasClass(a,b)||(a.className+=" "+b)};c.Utils.removeClass=function(a,b){a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ").trim()};c.Utils.bindMethods=function(a){Array.prototype.slice.call(arguments,1).forEach(function(b){a[b]=a[b].bind(a)})};c.Listbox=function(a,b){this.listboxNode=a;this.selectNode=b;this.activeDescendant=this.selectNode.getAttribute("aria-activedescendant");
this.multiselectable=this.listboxNode.hasAttribute("aria-multiselectable");this.hasGroups="menu"===this.listboxNode.getAttribute("role");this.currentList=a;this.currentlySelectedElement=null;this.maxItems=-1;this.pageAmount=4;this.keyTimeout=500;this.keysSoFar="";this.handleFocusChange=function(){};this.handleSubmenuOpen=function(){};this.registerEvents()};c.Listbox.prototype.registerEvents=function(){this.listboxNode.addEventListener("focus",this.setupFocus.bind(this));this.listboxNode.addEventListener("keydown",
this.checkKeyPress.bind(this));this.listboxNode.addEventListener("click",this.checkClickItem.bind(this))};c.Listbox.prototype.setupFocus=function(){};c.Listbox.prototype.focusFirstItem=function(){var a=this.currentList.querySelector('[role\x3d"option"],[role^\x3d"menuitem"],[role\x3d"none"]');a&&this.focusItem(a)};c.Listbox.prototype.focusLastItem=function(){var a=this.findCurrentListOptions();a.length&&this.focusItem(a[a.length-1])};c.Listbox.prototype.checkKeyPress=function(a){var b=a.which||a.keyCode,
f=this.activeDescendant,e=this.currentList.querySelector('[role\x3d"option"],[role^\x3d"menuitem"],[role\x3d"none"]');if(e=document.getElementById(this.activeDescendant)||e){var l="none"===e.getAttribute("role"),k=this.currentList!==this.listboxNode;switch(b){case c.KeyCode.UP:case c.KeyCode.DOWN:if(a.altKey)return;case c.KeyCode.PAGE_UP:case c.KeyCode.PAGE_DOWN:a.preventDefault();if(!this.activeDescendant){this.focusItem(e);break}b===c.KeyCode.UP?e=this.findPreviousOption(e,1):b===c.KeyCode.PAGE_UP?
e=this.findPreviousOption(e,this.pageAmount):b===c.KeyCode.DOWN?e=this.findNextOption(e,1):b===c.KeyCode.PAGE_DOWN&&(e=this.findNextOption(e,this.pageAmount));e&&this.focusItem(e);break;case c.KeyCode.HOME:a.preventDefault();this.focusFirstItem();break;case c.KeyCode.END:a.preventDefault();this.focusLastItem();break;case c.KeyCode.RETURN:l?(a.preventDefault(),this.openSubmenu(e)):this.toggleSelectItem(e,!0);break;case c.KeyCode.SPACE:a.preventDefault();l?this.openSubmenu(e):this.toggleSelectItem(e);
break;case c.KeyCode.RIGHT:a.preventDefault();this.openSubmenu(e);break;case c.KeyCode.ESC:case c.KeyCode.LEFT:k&&(a.preventDefault(),a=this.currentList.parentElement.parentElement,this.currentList=this.listboxNode,this.focusItem(a),this.closeSubmenus());break;case c.KeyCode.BACKSPACE:a.preventDefault();default:(a=this.findItemToFocus(b))&&this.focusItem(a)}this.activeDescendant!==f&&this.updateScroll()}};c.Listbox.prototype.isTopMenuFocused=function(){return this.currentList===this.listboxNode};
c.Listbox.prototype.isSelectionItemFocused=function(){return"none"!==document.getElementById(this.activeDescendant).getAttribute("role")};c.Listbox.prototype.openSubmenu=function(a,c){if(a.querySelector("[role\x3dmenu]")){var d=a.offsetParent?a.offsetTop-a.offsetParent.scrollTop:null,e=a.querySelector("[role^\x3dmenuitem]");b(this.listboxNode).children('[role\x3d"none"]').each(function(c,d){d!==a&&b(d).removeClass("bfDropDownList__group--expanded").children('[role^\x3d"menuitem"]').attr("aria-expanded",
"false")}.bind(this));a.offsetParent&&(a.offsetParent.scrollTop=Math.max(0,a.offsetTop-d));this.updateScrollForItem(a);e.setAttribute("aria-expanded","true");b(a).addClass("bfDropDownList__group--expanded");b(this.listboxNode.parentElement).addClass("bfDropDownList--group-expanded");d=a.querySelector("[role\x3dmenu]");this.handleSubmenuOpen(d);this.activeDescendant&&this.activeDescendant.parentElement===d?this.currentList=d:(e=d.querySelector('[role^\x3d"menuitem"]'),this.multiselectable||(e=d.querySelector('[role^\x3d"menuitem"][aria-selected\x3d"true"],[role^\x3d"menuitem"][aria-checked\x3d"true"]')||
e),e&&(c?this.updateScrollForItem(e):(this.currentList=d,this.focusItem(e))))}};c.Listbox.prototype.closeSubmenus=function(){b("[data-user-group]").removeClass("bfDropDownList__group--expanded");b("[aria-haspopup]",this.listboxNode).attr("aria-expanded","false");b(this.listboxNode.parentElement).removeClass("bfDropDownList--group-expanded");this.currentList=this.listboxNode;this.handleSubmenuOpen()};c.Listbox.prototype.findItemToFocus=function(a){var b=this.findCurrentListOptions(),f=String.fromCharCode(a),
e=0,l=0;if(!this.keysSoFar)for(var k=0;k<b.length;k++)if(b[k].getAttribute("id")===this.activeDescendant){e=k;l=1;break}this.clearKeysSoFarAfterDelay();a===c.KeyCode.BACKSPACE?(this.keysSoFar=this.keysSoFar.slice(0,-1),a=this.findMatchInRange(b,0,b.length)):(this.keysSoFar+=f,(a=this.findMatchInRange(b,e+l,b.length))||(a=this.findMatchInRange(b,0,e)));return a};c.Listbox.prototype.findCurrentListOptions=function(){return Array.prototype.slice.call(this.currentList.children).filter(function(a){a=a.getAttribute("role");
return"option"===a||"none"===a||"menuitem"===a||"menuitemcheckbox"===a})};c.Listbox.prototype.findNextOption=function(a,b){var c=this.findCurrentListOptions();a=c.indexOf(a);var d=null;-1<a&&(d=c[Math.min(c.length-1,a+b)]);return d};c.Listbox.prototype.findPreviousOption=function(a,b){var c=this.findCurrentListOptions();a=c.indexOf(a);var d=null;-1<a&&(d=c[Math.max(0,a-b)]);return d};c.Listbox.prototype.clearKeysSoFarAfterDelay=function(){0<=this.keyTimeout&&(this.keyClear&&(clearTimeout(this.keyClear),
this.keyClear=null),this.keyClear=setTimeout(function(){this.keysSoFar="";this.keyClear=null}.bind(this),this.keyTimeout))};c.Listbox.prototype.findMatchInRange=function(a,b,c){for(;b<c;b++){var d=a[b].textContent;if(d&&0===d.trim().toUpperCase().indexOf(this.keysSoFar))return a[b]}return null};c.Listbox.prototype.checkClickItem=function(a){var c=b(a.target).closest("li"),f=c.attr("role"),e=c.get(0);c=c.closest("ul").get(0);var l=c!==this.listboxNode;switch(f){case "option":case "menuitem":case "menuitemcheckbox":l||
this.closeSubmenus();this.currentList=c;this.focusItem(e);this.toggleSelectItem(e);this.updateScroll();b(a.target).focusout();break;case "none":this.currentList=c,this.focusItem(e),this.toggleSubmenu(e),this.updateScroll()}};c.Listbox.prototype.toggleSubmenu=function(a){a.querySelector('[aria-haspopup][aria-expanded\x3d"true"]')?this.closeSubmenus():this.openSubmenu(a,!0)};c.Listbox.prototype.toggleSelectItem=function(a,b){if(this.multiselectable){if((b="true"===a.getAttribute("aria-checked")&&!b)||
0>=this.maxItems||this.listboxNode.querySelectorAll('[aria-checked\x3d"true"]:not([aria-haspopup])').length<this.maxItems)if(a.setAttribute("aria-checked",b?"false":"true"),b=a.parentElement,b!==this.listboxNode){var c=!0,d=!0,l="mixed";Array.prototype.slice.call(b.querySelectorAll('[role\x3d"menuitemcheckbox"]')).forEach(function(a){a="true"===a.getAttribute("aria-checked");c=c&&a;d=d&&!a});d?l="false":c&&(l="true");b.parentElement.parentElement.querySelector('[role\x3d"menuitemcheckbox"][aria-haspopup\x3d"menu"]').setAttribute("aria-checked",
l)}this.handleFocusChange(a)}};c.Listbox.prototype.defocusItem=function(a,b){a&&(this.multiselectable||(b?this.currentlySelectedElement||(this.currentlySelectedElement=a):(this.removeItemSelection(a),this.currentlySelectedElement&&(this.removeItemSelection(this.currentlySelectedElement),this.currentlySelectedElement.removeAttribute("aria-selected"),this.currentlySelectedElement=null))),a.classList.remove("focused"))};c.Listbox.prototype.removeItemSelection=function(a){this.hasGroups||this.multiselectable?
a.setAttribute("aria-checked","false"):a.removeAttribute("aria-selected")};c.Listbox.prototype.focusItem=function(a){var b="none"===a.getAttribute("role");this.defocusItem(document.getElementById(this.activeDescendant),b);a.classList.add("focused");this.multiselectable||b||(a.setAttribute(this.hasGroups||this.multiselectable?"aria-checked":"aria-selected","true"),this.handleFocusChange(a));this.listboxNode.setAttribute("aria-activedescendant",a.id);this.activeDescendant=a.id};c.Listbox.prototype.getSelectedItems=
function(){return this.listboxNode.querySelectorAll("[aria-selected\x3dtrue],[aria-checked\x3dtrue]:not([aria-haspopup])")};c.Listbox.prototype.focusFirstSelectedItem=function(){var a=this.getSelectedItems()[0];a&&(a.id!==this.activeDescendant&&(document.getElementById(this.activeDescendant).classList.remove("focused"),this.currentlySelectedElement=null,this.listboxNode.setAttribute("aria-activedescendant",a.id),this.activeDescendant=a.id,a.classList.add("focused")),a=b(a).closest("ul")[0],a===this.listboxNode?
this.closeSubmenus():this.currentList!==a&&this.openSubmenu(a.parentElement.parentElement,!0))};c.Listbox.prototype.updateScroll=function(a,b){if(this.activeDescendant){var c=document.getElementById(this.activeDescendant);c&&(a&&(a=c.parentElement,a!==this.listboxNode&&this.updateScrollForItem(a.parentElement.parentElement,b)),this.updateScrollForItem(c,b))}};c.Listbox.prototype.updateScrollForItem=function(a,c){var d=b(a).scrollParent().get(0);a="none"===a.getAttribute("role")?a.querySelector('[role^\x3d"menuitem"]'):
a;d.scrollHeight>d.clientHeight&&(c?d.scrollTop=a.offsetTop+(a.offsetHeight-d.clientHeight)/2:(c=a.offsetTop+a.offsetHeight,c>d.clientHeight+d.scrollTop&&(d.scrollTop=c-d.clientHeight),a.offsetTop<d.scrollTop&&(d.scrollTop=a.offsetTop)))};c.Listbox.prototype.setHandleFocusChange=function(a){this.handleFocusChange=a}})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.policyConsent",b.xfaWidget.defaultWidget,{_widgetName:"policyConsent",options:{choices:{},specification:null,channelParameters:null,showPreferredContactChannel:!1,$channelDropdown:null,closeButtonText:void 0,infoButtonText:void 0,channelMandatory:!1,channelFirstImplicit:!0,showChannelRadios:!1,channel:null,manualChannelSelection:!1,tabIndex:-1},availableChannels:[],$infoTextContainer:null,TEMPLATE_INFO_BUTTON:'\x3cbutton class\x3d"guideHelpQuestionMark" aria-haspopup\x3d"dialog" data-guide-alwaysshow\x3d"false"\x3e\x3c/button\x3e',
render:function(){var c=this._superApply(arguments);this.$infoTextContainer=b('\x3cdiv class\x3d"gcdm-policy__info-text-container"\x3e\x3c/div\x3e').attr("id",c.attr("id")+"_info-text-container").insertAfter(c);this.options.choices=g.isEmpty(this.options.value)?{}:JSON.parse(this.options.value);this.options.specObj=g.isEmpty(this.options.specification)?null:JSON.parse(this.options.specification);this._updateDOMStructure(c);this._updateUsageState(c);return c},getEventMap:function(){return{focus:h.ut.XfaUtil.prototype.XFA_ENTER_EVENT,
exitPolicy:h.ut.XfaUtil.prototype.XFA_EXIT_EVENT,click:h.ut.XfaUtil.prototype.XFA_CLICK_EVENT,changePolicy:h.ut.XfaUtil.prototype.XFA_CHANGE_EVENT}},getOptionsMap:function(){var c=this._superApply(arguments);return b.extend({},c,{value:function(a){this._isValueSame()||(this.$userControl.data("value",a),this.option("choices",g.isEmpty(a)?{}:JSON.parse(a)),this.logger().debug("xfaView","choices set to: {0}",[a]))},specification:function(a){this.option("specObj",g.isEmpty(a)?null:JSON.parse(a));this.logger().debug("xfaView",
"specification set to: {0}",[a])},channel:function(a){b(".gcdm-policy__channel-radio",this.$userControl).each(function(){var c=b(this),f=c.attr("value")===a;c.prop("checked",f)});this.logger().debug("xfaView","channel set to: {0}",[a])},showChannelRadios:function(a){this.$userControl.toggleClass("gcdm-policy--channel-hidden",!a)},isValid:function(a){a?this._markValid():this._markInvalid()},access:function(a){switch(a){case "nonInteractive":case "protected":case "readOnly":this.option("enabled",!1);
break;default:this.option("enabled",!0)}}})},_setOptions:function(c){var a=!1,d=!1;b.each(c,function(b,c){if(this.option(b)!==c)switch(b){case "specification":case "access":case "channelParameters":d=a=!0;break;case "choices":d=!0}this._setOption(b,c)}.bind(this));a&&this._updateDOMStructure(this.$userControl);d&&this._updateUsageState(this.$userControl)},_isValueSame:function(){return null===this.options.value&&""===this.$userControl.data("value")||this.options.value===this.$userControl.data("value")},
showDisplayValue:function(){},showValue:function(){},focus:function(){var c=this;setTimeout(function(){var a=b("input",c.$userControl).get(0);a&&a.focus()},1)},getCommitValue:function(){this._syncConsentWidget();this.option.isValid||this._markInvalid();return this.$userControl.data("value")},_attachEventHandlers:function(c){this._superApply(arguments);var a=this;c.on("click.policyconsent","input.gcdm-policy__checkbox-definition",function(){var d=b(this),f=d.closest(".gcdm-policy__usage-definition");
b("input.gcdm-policy__checkbox-usage:not(:disabled)",f).prop("checked",d.prop("checked"));var e=0<b("input.gcdm-policy__checkbox-usage:checked",f).length;f=0<b("input.gcdm-policy__checkbox-usage:not(:checked)",f).length;d.prop("checked",e&&!f).prop("indeterminate",e&&f);a._syncChannel(c);c.trigger("changePolicy");a._validateImmediately(d)});c.on("click.policyconsent","input.gcdm-policy__checkbox-usage",function(){var d=b(this),f=d.closest(".gcdm-policy__usage-definition"),e=b("input.gcdm-policy__checkbox-definition",
f),l=0<b("input.gcdm-policy__checkbox-usage:checked",f).length;f=0<b("input.gcdm-policy__checkbox-usage:not(:checked)",f).length;e.prop("checked",l&&!f).prop("indeterminate",l&&f);a._syncChannel(c);c.trigger("changePolicy");a._validateImmediately(d)});c.on("click.policyconsent","input.gcdm-policy__channel-radio",function(d){var f=b(this),e=null;if(f.is(":checked"))e=f.val();else if(a.options.channelMandatory){d.preventDefault();return}b("input.gcdm-policy__channel-radio").each(function(){var a=b(this);
a.prop("checked",e===a.val())});a.options.channel!==e&&(a.option("channel",e),a.$userControl.trigger("preferredChannelChange",e));c.trigger("changePolicy")});if(0<=window.navigator.userAgent.indexOf("Trident")||0<=window.navigator.userAgent.indexOf("Edge"))c.on("mousedown keydown touchstart","input,label",function(){var a=b(this);a=a.is("label")?b("#"+a.attr("for")):a;a.prop("indeterminate")&&a.prop("checked",!0)});c.on("click.policyconsent keypress.policyconsent",".guideHelpQuestionMark",function(c){if("keypress"!==
c.type||a._isToggleKeyEvent(c))c.preventDefault(),c=b(this).attr("aria-owns"),b("#"+c).dialog("open")});c.on("click.policyconsent","button.gcdm-policy__usages-toggle",function(a){var c=b(a.target);c.attr("aria-expanded",String("true"!==c.attr("aria-expanded")));a.preventDefault()});c.on("focusout.policyconsent",function(a){null!==a.relatedTarget&&0!==b(a.relatedTarget).closest(c).length||c.trigger("exitPolicy")})},_handleKeyDown:function(){},_syncConsentWidget:function(){var c={};b(".gcdm-policy__checkbox-usage:checked",
this.$userControl).each(function(){var a=b(this),d=a.data("usageDefinition");a=a.data("usage");c[d]=c[d]||{};c[d][a]=!0}).get();this.option("value",b.isEmptyObject(c)?null:JSON.stringify(c))},_markInvalid:function(){var b=this.$userControl.find('input[aria-required\x3d"true"]:not(:checked)');b.attr("aria-invalid",!0);b.closest(".gcdm-policy__usage-definition").has(".gcdm-policy__usages-toggle").removeClass("gcdm-policy__usage-definition--usages-hidden")},_markValid:function(){this.$userControl.find('input[aria-required\x3d"true"]').removeAttr("aria-invalid")},
_updateDOMStructure:function(b){if(this.option("specification")&&this.option("specObj")){var a=[],c=[],f=[],e=[],l=[];this.option("specObj").textBlocks[0].usageText.forEach(function(b){"header"===b.tag?a.push(b):"beforeUsageDef"===b.tag?c.push(b):"popup"===b.tag?f.push(b):"afterUsageDef"===b.tag?e.push(b):l.push(b)});a.sort(function(a,b){return a.ordinalNumber-b.ordinalNumber});c.sort(function(a,b){return a.ordinalNumber-b.ordinalNumber});f.sort(function(a,b){return a.ordinalNumber-b.ordinalNumber});
e.sort(function(a,b){return a.ordinalNumber-b.ordinalNumber});l.sort(function(a,b){return a.ordinalNumber-b.ordinalNumber});this.$infoTextContainer.empty();var k=[],g=this;a.forEach(function(a){var c=f.find(function(b){return b.ordinalNumber===a.ordinalNumber+1});null!==c?k.push(g._createUsageText(b,a,c,"gcdm-policy__header")):k.push(g._createUsageText(b,a,null,"gcdm-policy__header"))});c.forEach(function(a){var c=f.find(function(b){return b.ordinalNumber===a.ordinalNumber+1});null!==c?k.push(g._createUsageText(b,
a,c)):k.push(g._createUsageText(b,a))});k.push(this._createUsageDefinitions(b));e.forEach(function(a){var c=f.find(function(b){return b.ordinalNumber===a.ordinalNumber+1});null!==c?k.push(g._createUsageText(b,a,c)):k.push(g._createUsageText(b,a))});l.forEach(function(a){var c=f.find(function(b){return b.ordinalNumber===a.ordinalNumber+1});null!==c?k.push(g._createUsageText(b,a,c,"gcdm-policy__footer")):k.push(g._createUsageText(b,a,null,"gcdm-policy__footer"))});b.empty().append([].concat.apply([],
k).filter(function(a){return null!=a}))}},_createUsageText:function(c,a,d,f){if(a&&!g.isEmpty(a.value)){var e=b('\x3cdiv class\x3d"gcdm-policy__usage-text"\x3e\x3c/div\x3e');g.isEmpty(f)||e.addClass(f);"text/html"===a.mimeType?e.html(a.value):e.text(a.value);d&&!g.isEmpty(d.value)&&(c=c.attr("id")+"-text-"+d.ordinalNumber,b(this.TEMPLATE_INFO_BUTTON).attr("aria-owns",c).prop("disabled",!this.options.enabled).appendTo(e),this._createPolicyDescription(c,d.value,"text/html"===d.mimeType,e));return e}},
_createUsageDefinitions:function(c){var a=this.option("specObj").textBlocks[0],d=!this.option("enabled"),f=[],e=c.attr("id")+"-",l=e+"channelRadio",k=0,h,q;g.chain(a.usageDefinitions).sortBy("ordinalNumber").map(function(a){a.usages=g.sortBy(a.usages,"ordinalNumber");return a}).value().forEach(function(a){var c=e+k,g=b('\x3cdiv class\x3d"gcdm-policy__usage-definition"\x3e\x3c/div\x3e'),n=b.parseHTML(a.textPrimary)[0];3===n.nodeType&&(n=b("\x3cspan\x3e\x3c/span\x3e").text(a.textPrimary));var m=b('\x3cdiv class\x3d"gcdm-policy__usage-definition-inner"\x3e\x3c/div\x3e').append(b('\x3clabel class\x3d"gcdm-policy__checkbox-label"\x3e\x3c/label\x3e').attr("for",
c).append(n));n=b('\x3cinput class\x3d"gcdm-policy__checkbox gcdm-policy__checkbox-definition" type\x3d"checkbox"/\x3e').attr("data-usage-definition",a.id).attr("id",c);var t=b('\x3cdiv class\x3d"gcdm-policy__usage-definition-outer"\x3e\x3c/div\x3e').append(n,'\x3cspan class\x3d"gcdm-policy__checkbox-styled"\x3e\x3c/span\x3e',m),u=null;if(a.textSecondary){var y=c+"___guideFieldPolicyDescription";u=b(this.TEMPLATE_INFO_BUTTON).attr("aria-owns",y).appendTo(m);this._createPolicyDescription(y,a.textSecondary,
!0,t)}var p=this.option("channelParameters")&&this.option("channelParameters")[a.id];p&&(p.prefixGroupLabel&&(h=c+"_channel-label",f.push(this._createPreferredChannelRadioGroupLabel(p.groupLabel,h))),void 0!==p.value&&this._createPreferredChannelRadio(c+"___guideFieldChannelRadio",l,h,p.label,p.value,c,t));g.append(t);var v=!0,r=!0,w=!0,z=0,A=c+"-";c=A+"container";m=b('\x3cdiv class\x3d"gcdm-policy__usages-container"\x3e\x3c/div\x3e').appendTo(g);if(1<a.usages.length)switch(a.display){case "ON_DEMAND":m.addClass("gcdm-policy__usages-container--toggled").append(b('\x3cbutton class\x3d"gcdm-policy__usages-toggle" aria-expanded\x3d"false"\x3e\x3c/button\x3e').attr({"aria-controls":c}).prop("disabled",
!this.options.enabled).text(this.options.usageToggleText));break;case "ALWAYS":case "MORE_THAN_ONE":m.addClass("gcdm-policy__usages-container--always")}var B=b('\x3cdiv class\x3d"gcdm-policy__usages"\x3e\x3c/div\x3e').attr("id",c).appendTo(m);a.usages.forEach(function(c){var f=A+z,e="IMPLICIT"===c.variant,k="MANDATORY"===c.variant;v=v&&k;r=r&&d;w=w&&e;var n=b('\x3cdiv class\x3d"gcdm-policy__usage-inner"\x3e\x3c/div\x3e').append(b('\x3clabel class\x3d"gcdm-policy__checkbox-usage-label"\x3e\x3c/label\x3e').attr("for",
f).text(c.usage.label)),h=b('\x3cinput class\x3d"gcdm-policy__checkbox gcdm-policy__checkbox-usage" type\x3d"checkbox"/\x3e').attr({id:f,"data-usage-definition":a.id,"data-usage":c.usage.name}).prop("disabled",d);n=b('\x3cdiv class\x3d"gcdm-policy__usage"\x3e\x3c/div\x3e').append(h,'\x3cspan class\x3d"gcdm-policy__checkbox-styled"\x3e\x3c/span\x3e',n);if(c=p&&p.usages&&p.usages[c.id])c.prefixGroupLabel&&(q=f+"_channel-label",this._createPreferredChannelRadioGroupLabel(c.groupLabel,q,B)),void 0!==
c.value&&this._createPreferredChannelRadio(f+"___guideFieldChannelRadio",l,q,c.label,c.value,f,n);k&&(h.attr("aria-required","true"),n.attr("data-mandatory","true"));e&&g.attr("hidden","true");B.append(n);z++}.bind(this),a);v&&(n.attr("aria-required","true"),g.attr("data-mandatory","true"));w&&n.attr("aria-hidden","true");n.prop("disabled",r);u&&u.prop("disabled",r);switch(a.display){case "ALWAYS":break;case "MORE_THAN_ONE":2>a.usages.length&&g.addClass("gcdm-policy__usage-definition--usages-hidden");
break;default:g.addClass("gcdm-policy__usage-definition--usages-hidden")}f.push(g);p&&p.suffixDropdown&&f.push(this.options.$channelDropdown);k++}.bind(this));return f},_createPolicyDescription:function(c,a,d,f){function e(){var a=0;var c=window&&window.dialogModal;if(1===b("#aemFormFrame",parent.document).length){a=window.parent.window.scrollY;var d=window.parent.window.innerHeight;a=0<a?a:0}c[0].style.top=a+"px";c[0].style.maxHeight=d-200+"px"}c=b('\x3cdiv class\x3d"guidePolicyDescription long"\x3e\x3c/div\x3e').attr("id",
c);d?(c.html(a),b("a:not(target)",c).attr("target","_blank")):c.text(a);f.append(c);c.dialog({modal:!0,autoOpen:!1,draggable:!1,resizable:!1,responsive:!1,clickOut:!0,width:"available",appendTo:"#"+this.$infoTextContainer.attr("id"),closeText:this.options.closeButtonText,title:this.options.infoButtonText,position:{using:function(){}},create:function(){b(this).closest(".ui-dialog").attr("aria-modal","true")},open:function(a){b("body").addClass("ui-dialog-modal");var c=b(this).closest(".ui-dialog");
window.parentIFrame&&(setTimeout(function(){var a=c.offset();window.dialogModal=c;window.parentIFrame.scrollTo(0,a.top);e()}),window.parent.window.addEventListener("scroll",e))},close:function(){b("body").removeClass("ui-dialog-modal");window.parent.window.removeEventListener("scroll",e)}})},_createPreferredChannelRadio:function(c,a,d,f,e,g,k){var h=b('\x3cdiv class\x3d"gcdm-policy__channel-radio-container"\x3e\x3c/div\x3e'),l=c+"-label";b('\x3cinput type\x3d"checkbox" class\x3d"gcdm-policy__channel-radio"/\x3e').attr({id:c,
name:a,value:e,disabled:!this.options.enabled,"aria-labelledby":l+" "+d}).prop("checked",e===this.options.channel).data({udCheckbox:g}).appendTo(h);b("\x3cspan\x3e\x3c/span\x3e").appendTo(h);b("\x3clabel\x3e\x3c/label\x3e").attr({id:l,for:c}).text(f).appendTo(h);h.appendTo(k)},_createPreferredChannelRadioGroupLabel:function(c,a,d){a=b('\x3cdiv class\x3d"gcdm-policy__channel-group-label"\x3e\x3c/div\x3e').attr("id",a);b("\x3cdiv\x3e\x3c/div\x3e").text(c).appendTo(a);d&&a.appendTo(d);return a},_updateUsageState:function(c){var a=
this.options.choices||{};b(".gcdm-policy__usage-definition",c).each(function(){var c=b(this),d=b("input.gcdm-policy__checkbox-definition",c),g=d.data("usage-definition");c=b("input.gcdm-policy__checkbox-usage",c);var k=0<c.length,h=!1;c.each(function(){var c=b(this),d=c.data("usage");d=a[g]&&a[g][d]||!1;k=k&&d;h=h||d;c.prop("checked",d)});d.prop("checked",k);d.prop("indeterminate",!k&&h)});var d=this.options.channel;b(".gcdm-policy__channel-radio",c).each(function(){var a=b(this),c=a.attr("value")===
d;a.prop("checked",c)});this._syncChannel(c)},_isToggleKeyEvent:function(b){return"Enter"===b.key||13===b.keyCode||" "===b.key||32===b.keyCode},_syncChannel:function(c){if(this.options.showPreferredContactChannel){var a=[];b("input.gcdm-policy__channel-radio",c).each(function(){var d=b(this),f=b("#"+d.data("udCheckbox"),c),e=d.closest(".gcdm-policy__channel-radio-container");f=f.prop("checked");e.toggleClass("gcdm-policy__channel-radio-container--hidden",!f);f&&a.push(d.attr("value"))});g.isEqual(this.availableChannels,
a)||(this.availableChannels=a,c.trigger("availableChannelsChange",[a]))}},_validateImmediately:function(b){this.options.isValid||(b.triggerHandler("exitPolicy"),b.triggerHandler("focus"))}})})($,_,xfalib);
(function(b){b.widget("xfaWidget.gcdmCaptcha",b.xfaWidget.abstractWidget,{g_recaptcha_response:"",_widgetName:"GcdmRecaptcha",render:function(){var g=this;this.element.append('\x3cdiv class\x3d"g-recaptcha"\x3e\x3c/div\x3e');var h=b("div.g-recaptcha")[0],c;window.successCallback=function(a){g.g_recaptcha_response=a;g.tokenChange()};window.expiredCallback=function(){grecaptcha.reset(c);g.g_recaptcha_response="";g.tokenChange()};var a={sitekey:this.element.data("rcSitekey"),theme:this.element.data("rcTheme")||
"light",type:this.element.data("rcType")||"image",size:this.element.data("rcSize")||"normal",callback:window.successCallback,"expired-callback":window.expiredCallback};onloadCallbackInternal=function(){return c=grecaptcha.render(h,a)};window.onloadRecaptchaCallback=onloadCallbackInternal;window.runtimeLocale=this.element.data("locale");window.recaptcha_url="https://www.google.com/recaptcha/api.js";window.guideBridge.on("captcha.gcdm.load",function(a,c){b(".afCaptchaField").append('\x3cscript src\x3d"'+
window.recaptcha_url+"?onload\x3donloadRecaptchaCallback\x26render\x3dexplicit\x26hl\x3d"+window.runtimeLocale+'" async defer\x3e\x3c/script\x3e')});var d=b("div.g-recaptcha");d.on("focusout.gcdmcaptcha",function(a){null!==a.relatedTarget&&0!==b(a.relatedTarget).closest(d).length||d.trigger("exitCaptcha")});return d},tokenChange:function(){this.$userControl.trigger("changeCaptcha")},showDisplayValue:function(){},showValue:function(){},getEventMap:function(){return{focus:xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT,
changeCaptcha:xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT,click:xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT,changePolicy:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT}},getCommitValue:function(){return this.g_recaptcha_response}})})($);
(function(b,g,h){b.widget("xfaWidget.bfTextbox",b.xfaWidget.textField,{_widgetName:"bfTextbox",options:{keyboardType:"text",numericKeyboard:!1},render:function(){var b=this._super();b.attr("type",this.options.keyboardType);b.attr("inputmode",this.options.numericKeyboard?"numeric":"text");var a=this.options.maxChars,d=this.options.length;b.attr("minlength",this.options.minLength);this.options.multiLine&&a&&"0"!==a?this.textBoxInput(b,a):this.options.multiLine&&d&&this.textBoxInput(b,d);return b},textBoxInput:function(c,
a){c.attr("maxlength",a);var d=b('\x3cdiv class\x3d"bfTexbox__remainingMessage"\x3e\x3cspan class\x3d"bfTextbox__remainingCharacters"\x3e\x3c/span\x3e/'+a+" "+(this.options.counterText?this.options.counterText:"")+"\x3c/div\x3e");b(".bfTextbox__remainingCharacters",d).text(a);c.on("input.bfTextbox",function(){var c=this.value;c=a-(c?c.length:0);b(".bfTextbox__remainingCharacters",d).text(c)});c.after(d)}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfDynamicText",b.xfaWidget.abstractWidget,{_widgetName:"bfDynamicText",options:{tabIndex:-1},getOptionsMap:function(){var c=this._super();return b.extend({},c,{value:function(a){this.$userControl.find(".dynamictext-holder").text(a)}})},getCommitValue:function(){return this.options.value}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfButton",b.xfaWidget.xfaButton,{_widgetName:"bfButton",options:{showRightIcon:!1},render:function(){var c=b.xfaWidget.xfaButton.prototype.render.apply(this,arguments);this.options.showRightIcon&&c.addClass("showRightIcon");return c}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfRadioButton",b.xfaWidget.XfaCheckBox,{_widgetName:"bfRadioButton",render:function(){var c=b.xfaWidget.XfaCheckBox.prototype.render.apply(this,arguments);c.closest(".XfaCheckBox").append('\x3cdiv class\x3d"bf-radio-icon"\x3e\x3c/div\x3e');return c}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfCheckBox",b.xfaWidget.XfaCheckBox,{_widgetName:"bfCheckBox",render:function(){var c=b.xfaWidget.XfaCheckBox.prototype.render.apply(this,arguments);c.closest(".XfaCheckBox").append('\x3cdiv class\x3d"bf-checkbox-icon"\x3e\x3c/div\x3e');return c}})})($,_,xfalib);
(function(b,g,h){var c=h.ut.XfaUtil.prototype;b.widget("xfaWidget.dateInputWidget",b.xfaWidget.dateInputWidget,{options:{autocomplete:"off",tabIndex:-1},INPUT_WRAPPER_TEMPLATE:'\x3cdiv class\x3d"comb-datefield__input-wrapper"\x3e\x3c/div\x3e',PLACEHOLDER_TEMPLATE:'\x3cdiv class\x3d"guideFieldWidget__placeholder" aria-hidden\x3d"true"\x3e\x3cspan class\x3d"comb-datefield__placeholder-input" style\x3d"visibility: hidden;"\x3e\x3c/span\x3e\x3cspan class\x3d"comb-datefield__placeholder-text"\x3e\x3c/span\x3e\x3c/div\x3e',
KeyCode:{BACKSPACE:8,LEFT:37,RIGHT:39,DELETE:46},AutoComplete:{Y:"bday-year",M:"bday-month",D:"bday-day"},render:function(){null===c.getLogger()&&(c.logger={debug:function(){}});this._super();b(".comb-datefield",this.element).addClass("guideFieldWidget__placeholder-border");return this.element},getOptionsMap:function(){var a=this._super();return b.extend({},a,{value:function(b){a.value.apply(this,arguments);["Y","M","D"].forEach(function(a){this._updatePlaceholder(this.combFieldControls[a].numericInputWidget)}.bind(this))},
access:function(a){switch(a){case "nonInteractive":case "protected":case "readOnly":var b="protected";break;default:b="open"}g.each(this.combFieldControls,function(a){a.value="";a.numericInputWidget.option("access",b)})}})},getEventMap:function(){return{focus:c.XFA_ENTER_EVENT,blur:c.XFA_EXIT_EVENT,change:c.XFA_CHANGE_EVENT}},getCommitValue:function(){var a=["Y","M","D"].reduce(function(a,b){return a+"-"+this.combFieldControls[b].numericInputWidget.getCommitValue()}.bind(this),"").substring(1);return"--"===
a?"":a},focus:function(){this._getCombFieldControl(0).numericInputWidget.focus()},_initializeCombFields:function(){this._super();["Y","M","D"].forEach(function(a){var b=this.combFieldControls[a],f=b.numericInputWidget,e=f.element,g=e.closest("[data-dateinput-wrapper]");g.off(c.XFA_CHANGE_EVENT);g.off(c.XFA_EXIT_EVENT);f._on({input:function(b){if(!b.inputType||0>b.inputType.indexOf("delete"))this._smartAutocomplete(a),this._jumpToNextInput(a);this._updatePlaceholder(f);this.element.triggerHandler("change")}.bind(this),
xfaexit:function(a){b.value=f.option("value");f.option("displayValue",b.value);a.stopPropagation()}.bind(this),keypress:function(a){switch(a.key){case ".":case "/":b.regex.test(f.getCommitValue())&&f.element.closest(".comb-datefield").next().find("input").trigger("focus")}}.bind(this),keydown:function(a){switch(a.which||a.keyCode){case this.KeyCode.LEFT:case this.KeyCode.BACKSPACE:if(0===e[0].selectionStart&&0===e[0].selectionEnd){var c=f.element.closest(".comb-datefield").prev().find("input");if(0<
c.length){c.trigger("focus");var d=c.val().length;c[0].setSelectionRange(d,d);a.preventDefault();return!1}}break;case this.KeyCode.RIGHT:if(c=e.val().length,b.regex.test(f.getCommitValue())&&e[0].selectionStart===c&&e[0].selectionEnd===c&&(c=f.element.closest(".comb-datefield").next().find("input"),0<c.length))return c.trigger("focus"),c[0].setSelectionRange(0,0),a.preventDefault(),!1}}.bind(this)});e.attr({autocomplete:"true"===this.options.autocomplete?this.AutoComplete[a]:"off",inputmode:"numeric",
pattern:"[0-9]*"}).removeAttr("placeholder").wrap(this.INPUT_WRAPPER_TEMPLATE).after(this.PLACEHOLDER_TEMPLATE);"true"===this.options.autocomplete&&e.attr("name",this.AutoComplete[a]);this._updatePlaceholder(f);f.postProcessExit=function(){this._handleCombFieldExit(f,a)}.bind(this)}.bind(this))},_initializeEventHandlers:function(){this._super();this.element.on("click.dateInput",function(a){var c=this._getCombFieldControl(0).numericInputWidget.element;b(a.target).is("input")||c.trigger("focus");!b(a.target).hasClass("comb-form-group-day")&&
b(a.target).closest(".guideDatePicker").hasClass("af-field-empty")&&c.trigger("focus")}.bind(this));this.element.on("focusout.dateInput",function(a){null!==a.relatedTarget&&0!==b(a.relatedTarget).closest(this.element).length||this.element.triggerHandler("blur")}.bind(this))},_smartAutocomplete:function(a){var b=this.combFieldControls[a].numericInputWidget,c=b.element.val(),e=parseInt(c);if("M"===a&&1<e&&1===c.length||"D"===a&&3<e&&1===c.length)a="0"+c,b.option("value",a),b.option("displayValue",a)},
_jumpToNextInput:function(a){a=this.combFieldControls[a];var b=a.numericInputWidget,c=b.element.val();c.length===b.option("combCells")&&a.regex.test(c)&&b.element.closest(".comb-datefield").next().find("input").trigger("focus")},_handleCombFieldExit:function(a,b){var c=a.getCommitValue(),d=c;1!==c.length||"M"!==b&&"D"!==b||"0"!==c&&(d="0"+c);a.option("value",d);a.option("displayValue",d);this._updatePlaceholder(a)},_updatePlaceholder:function(a){var c=a.element.closest(".comb-datefield"),f=a.getCommitValue();
a=a.option("placeholder");b(".comb-datefield__placeholder-input",c).text(null===f?"":f);b(".comb-datefield__placeholder-text",c).text(a.substring(null===f?0:f.length))}})})($,_,xfalib);
(function(b,g,h,c){var a=h.ut.XfaUtil.prototype;b.widget("xfaWidget.bfDateTimeEditWidget",b.xfaWidget.defaultWidget,{options:{autocomplete:"off",placeholder:"",minDate:new Date,maxDate:new Date,maxDaysAhead:0,excludeMonday:!1,excludeTuesday:!1,excludeWednesday:!1,excludeThursday:!1,excludeFriday:!1,minPossibleDate:new Date,maxPossibleDate:new Date,isMobile:!1,datePatternLong:"",datePatternShort:""},destroy:function(){this.$userControl.find("input").datepicker("destroy");this._super()},render:function(){function d(a){for(var b;a.length&&
a[0]!==document;){b=a.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b)return b;a=a.parent()}return 0}null===a.getLogger()&&(a.logger={debug:function(){}});this._super();var f=this;b(this.element).empty().addClass("bfDateTimeEdit");var e=this.options.minDaysAhead,g=this.options.maxDaysAhead;if(this.options.minDate&&"[object String]"==Object.prototype.toString.call(this.options.minDate)){var h=Math.floor(new Date(this.options.minDate)-
(new Date).getTime());h=Math.floor(h/864E5);h>this.options.minDaysAhead&&(e=h+1)}this.options.minPossibleDate=new Date;this.options.minPossibleDate.setDate(this.options.minPossibleDate.getDate()+e);this.options.minPossibleDate.setHours(0,0,0,0);this.options.maxDate&&"[object String]"==Object.prototype.toString.call(this.options.maxDate)&&(h=Math.floor(new Date(this.options.maxDate)-(new Date).getTime()),h=Math.floor(h/864E5),h<this.options.maxDaysAhead&&(g=h+1));this.options.minPossibleDate=new Date;
this.options.maxPossibleDate.setDate(this.options.maxPossibleDate.getDate()+g);this.options.maxPossibleDate.setHours(0,0,0,0);c.locale(document.documentElement.lang||window.navigator.language||"en");b.datepicker.parseDate=function(a,b){return b&&""!==b&&"Invalid date"!==b?c(b,a).toDate():null!==f.$userControl.datepicker("getDate")?f.$userControl.datepicker("getDate"):""};b.datepicker.formatDate=function(a,b){return c(b).format(a)};var m={};this.javaFormatMapping={d:"D",dd:"DD",y:"YYYY",yy:"YY",yyy:"YYYY",
yyyy:"YYYY",a:"a",A:"A",M:"M",MM:"MM",MMM:"MMM",MMMM:"MMMM",h:"h",hh:"hh",H:"H",HH:"HH",m:"m",mm:"mm",s:"s",ss:"ss",S:"SSS",SS:"SSS",SSS:"SSS",E:"ddd",EE:"ddd",EEE:"ddd",EEEE:"dddd",EEEEE:"dddd",EEEEEE:"dddd",D:"DDD",w:"W",ww:"WW",z:"ZZ",zzzz:"Z",Z:"ZZ",X:"ZZ",XX:"ZZ",XXX:"Z",u:"E"};this.translateFormat=function(a,b){for(var c=a.length,d=0,f=-1,e=null,g,h="";d<c;d++){g=a.charAt(d);if(null===e||e!==g)h=q(a,b,f,d,h),f=d;e=g}return q(a,b,f,d,h)};var q=function(a,b,c,d,f){-1!==c&&(a=a.substring(c,d),
b[a]&&(a=b[a]),f+=a);return f};this.toMomentFormatString=function(a){if(!m[a]){for(var b="",c=/[^']+|('[^']*')/g,d;d=c.exec(a);)d=d[0],b=d.match(/'(.*?)'/)?b+("["+d.substring(1,d.length-1)+"]"):b+this.translateFormat(d,this.javaFormatMapping);m[a]=b}return m[a]};this.formatWithJDF=function(a,b){return c(a).format(this.toMomentFormatString(b))};b.datepicker._showDatepicker=function(a){a=a.target||a;"input"!==a.nodeName.toLowerCase()&&(a=b("input",a.parentNode)[0]);if(!b.datepicker._isDisabledDatepicker(a)&&
b.datepicker._lastInput!==a){var c,f;var e=b.datepicker._getInst(a);b.datepicker._curInst&&b.datepicker._curInst!==e&&(b.datepicker._curInst.dpDiv.stop(!0,!0),e&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));var g=(g=b.datepicker._get(e,"beforeShow"))?g.apply(a,[a,e]):{};if(!1!==g){b.extend(e.settings,g);for(h in g)null==g[h]&&(e.settings[h]=g[h]);e.lastVal=null;b.datepicker._lastInput=a;b.datepicker._setDateFromField(e);b.datepicker._inDialog&&(a.value=
"");b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(a),b.datepicker._pos[1]+=a.offsetHeight);var h={left:0,top:b(this).outerHeight()};b.datepicker._pos=null;e.dpDiv.empty();e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.datepicker._updateDatepicker(e);h=b.datepicker._checkOffset(e,h,!1);e.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":"absolute",display:"none",left:h.left+"px",top:h.top+"px"});window.setTimeout(function(){if(!e.inline){c=b.datepicker._get(e,
"showAnim");f=b.datepicker._get(e,"duration");e.dpDiv.css("z-index",d(b(a))+1);b.datepicker._datepickerShowing=!0;if(b.effects&&b.effects.effect[c])e.dpDiv.show(c,b.datepicker._get(e,"showOptions"),f);else e.dpDiv[c||"show"](c?f:null);b.datepicker._shouldFocusInput(e)&&e.input.focus();b.datepicker._curInst=e}},300)}}};this.options.isMobile=window.matchMedia("(max-width: 1199px)").matches;h=this.options.isMobile?b('\x3cinput type\x3d"text" class\x3d"datePickerInput" readonly/\x3e').appendTo(this.element):
b('\x3cinput type\x3d"text" class\x3d"datePickerInput"/\x3e').appendTo(this.element);"true"==this.element.closest(".guideDatePicker").attr("data-disabled")?h.attr("disabled","disabled"):(h.datepicker({beforeShow:function(a,c){b(".datePickerOuterContainer").appendTo(this.parentElement);b("#ui-datepicker-div").appendTo(this.parentElement);setTimeout(function(){c.dpDiv.outerWidth(f.$userControl.parent().width())},0);setTimeout(function(){var a=b(window).height()-f.$userControl[0].getBoundingClientRect().bottom,
d=c.dpDiv.height();a<=d?c.dpDiv.addClass("on-top"):c.dpDiv.removeClass("on-top")},250)},beforeShowDay:function(a){a=a.getDay();return 1==a&&f.options.excludeMonday||2==a&&f.options.excludeTuesday||3==a&&f.options.excludeWednesday||4==a&&f.options.excludeThursday||5==a&&f.options.excludeFriday||6==a&&f.options.excludeSaturday||0==a&&f.options.excludeSunday?[!1]:[!0]},minDate:e,maxDate:g,showAnim:"slideDown",duration:"fast",closeText:"",prevText:"",nextText:"",currentText:"",monthNames:f.options.months,
monthNamesShort:f.options.months,dayNames:f.options.days,dayNamesShort:f.options.days,dayNamesMin:f.options.days,weekHeader:"",firstDay:f.options.weekStartsWithSunday?0:1,isRTL:!1,showMonthAfterYear:"JP"===guidelib.bf.context.market?!0:!1,yearSuffix:"JP"===guidelib.bf.context.market?"\u5e74":"",dateFormat:f.translateFormat(f.options.datePatternShort,f.javaFormatMapping)}),b("body").find(".datePickerOuterContainer").length||b('\x3cdiv class\x3d"datePickerOuterContainer"\x3e\x3c/div\x3e').insertBefore(".ui-datepicker"));
return h},closeDatePickerMobile:function(){b(".datePickerOuterContainer").hide();b("html",window.parent.window.document).removeClass("html-overflow-hidden")},showDisplayValue:function(){this.options.displayValue?this.$userControl.val(this.formatWithJDF(c(this.options.displayValue),this.options.datePatternShort)):this.$userControl.val("")},_handlePosition:function(){if(window.parentIFrame&&767>b(".aemformcontainer").width()){this.$userControl.datepicker("option","showAnim","");var a=b(this.element).find("#ui-datepicker-div");
window.parentIFrame.getPageInfo(function(c){c=c.scrollTop+c.windowHeight-a.height()-b("#aemFormFrame",parent.document).offset().top;b(a).css({top:c,bottom:"initial"})})}},getOptionsMap:function(){var a=this._super();return b.extend({},a,{value:function(a){},placeholder:function(a){b(".bfDateTimeEdit__mobile-placeholder",this.$userControl).text(a)},access:function(a){}})},getEventMap:function(){return{focusBfDateTimeEdit:a.XFA_ENTER_EVENT,blurBfDateTimeEdit:a.XFA_EXIT_EVENT,change:a.XFA_CHANGE_EVENT}},
getCommitValue:function(){var a=this.$userControl.datepicker("getDate");if(null!==a&&a>=this.options.minPossibleDate&&a<=this.options.maxPossibleDate){var b=a.getDay();return 1==b&&this.options.excludeMonday||2==b&&this.options.excludeTuesday||3==b&&this.options.excludeWednesday||4==b&&this.options.excludeThursday||5==b&&this.options.excludeFriday||6==b&&this.options.excludeSaturday||0==b&&this.options.excludeSunday?"":window.moment(a).format()}return""},_initializeEventHandlers:function(){this._super();
var a=this,c=!1;this.$userControl.on("focus",function(){c||(a.$userControl.trigger("focusBfDateTimeEdit"),a.showDisplayValue(),c=!0,b(".ui-datepicker").css("width",a.$userControl.width()))});this.$userControl.on("blur",function(){""===a.$userControl.val()&&(a.options.value=null);setTimeout(function(){if(c&&b(".ui-datepicker").is(":hidden")){var d=a.$userControl.val().match(/[0-9]{4}/g);if(null!==d){var f=a.$userControl.datepicker("getDate");a.$userControl.datepicker("setDate",new Date(d[0],f.getMonth(),
f.getDate()))}a.$userControl.trigger("blurBfDateTimeEdit");c=!1}},1E3)});b("div.ui-datepicker").on("click",function(){0<a.$userControl.parent().width()&&b(this).outerWidth(a.$userControl.parent().width())});this.$userControl.on("click",function(){b(".datePickerOuterContainer").show();0<b(".ui-datepicker .ui-datepicker-calendar").length&&a.options.placeholder&&(b(".ui-datepicker").prepend('\x3cdiv class\x3d"bfDateTimeEdit__mobile-header"\x3e\x3cspan class\x3d"bfDateTimeEdit__mobile-placeholder"\x3e\x3c/span\x3e\x3cdiv class\x3d"bfDateTimeEdit__mobile-close"\x3e\x3c/div\x3e\x3c/div\x3e'),
b(".bfDateTimeEdit__mobile-placeholder").text(a.options.placeholder));var c=b(".md-custom-overlay-wrapper .md-custom-overlay-main-selector",parent.document),d=b(".md-custom-overlay-wrapper .md-custom-overlay-main-selector",parent.document);(c.length&&767>d.width()&&!c.is(":empty")||c.length&&767>b(window).width()&&c.is(":empty"))&&b("html",window.parent.window.document).addClass("html-overflow-hidden");a._handlePosition()});b(".ui-datepicker").on("click",function(c){0===b(".ui-datepicker .bfDateTimeEdit__mobile-header").length&&
a.options.placeholder&&(b(".ui-datepicker").prepend('\x3cdiv class\x3d"bfDateTimeEdit__mobile-header"\x3e\x3cspan class\x3d"bfDateTimeEdit__mobile-placeholder"\x3e\x3c/span\x3e\x3cdiv class\x3d"bfDateTimeEdit__mobile-close"\x3e\x3c/div\x3e\x3c/div\x3e'),b(".bfDateTimeEdit__mobile-placeholder").text(a.options.placeholder))});b(".ui-datepicker").on("click",function(c){b(c.target).hasClass("bfDateTimeEdit__mobile-close")&&(b(".datePickerInput").datepicker("hide"),a.closeDatePickerMobile())});b(".datePickerOuterContainer").on("touchstart",
function(c){c.preventDefault();b(".datePickerInput").datepicker("hide");a.closeDatePickerMobile()});b(".datePickerOuterContainer").on("mousedown",function(c){c.preventDefault();b(".datePickerInput").datepicker("hide");a.closeDatePickerMobile()});this.$userControl.on("change",function(){a.closeDatePickerMobile()});this.$userControl.on("keyup keydown",function(){0<a.$userControl.parent().width()&&b("div.ui-datepicker").outerWidth(a.$userControl.parent().width())});this.$userControl.on("keyup",function(){"undefined"===
b(".ui-datepicker-month").text()&&(b(".ui-datepicker-month").text("Invalid"),b(".ui-datepicker-year").text("date"),b(".ui-datepicker-calendar").hide(),b(".ui-datepicker-prev").hide(),b(".ui-datepicker-next").hide());b(".ui-datepicker .ui-datepicker-header").css("border-bottom","none")});if(this.options.isMobile)b(".datePickerInput").on("mousedown",function(){b(this).blur()})}})})($,_,xfalib,window.moment);
(function(b,g,h){b.widget("xfaWidget.bfVin",b.xfaWidget.textField,{_widgetName:"bfVin",getCommitValue:function(){var b=this._super();return null===b?null:b.toUpperCase()}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfSwitch",b.xfaWidget.defaultWidget,{_widgetName:"bfSwitch",options:{value:null,state:-1,values:[],checkedLabel:null,uncheckedLabel:null},$label:null,render:function(){var c=this._superApply(arguments);c.prop("checked",0===this.options.state).attr("role","switch");this.$checkedLabel=b('\x3clabel for\x3d"'+c.attr("id")+'" class\x3d"guideFieldLabel label checkedLabel"\x3e\x3c/label\x3e').text(this.options.checkedLabel).insertAfter(c);this.$uncheckedLabel=b('\x3clabel for\x3d"'+
c.attr("id")+'" class\x3d"guideFieldLabel label uncheckedLabel hide"\x3e\x3c/label\x3e').text(this.options.uncheckedLabel).insertAfter(c);c.on("change",function(a){a=b(a.target).is(":checked")?0:1;var d=this.options.values[a];this.option({state:a,value:d,displayValue:d});c.trigger("bfSwitchChange")}.bind(this));return c},getOptionsMap:function(){return b.extend({},this._super(),{state:function(b){0===b?(this.$uncheckedLabel.addClass("hide"),this.$checkedLabel.removeClass("hide")):(this.$checkedLabel.addClass("hide"),
this.$uncheckedLabel.removeClass("hide"))}})},getEventMap:function(){return b.extend({},this._super(),{change:null,bfSwitchChange:h.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},getCommitValue:function(){return this.options.values[this.options.state]}})})($,_,xfalib);
(function(b,g,h){b.widget("xfaWidget.bfBrochureSelection",b.xfaWidget.defaultWidget,{_widgetName:"bfBrochureSelection",tableSkeleton:'\x3cdiv class\x3d"bf-brochureselection-list"\x3e\x3c/div\x3e',options:{maxListItemsAllowed:0},getOptionsMap:function(){var c=b.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return b.extend({},c,{value:function(a){this.element.bfDropDownList({value:a});this.disableDropdown(this);this.element.trigger("tableValuesChanged",a.join("\n"))},items:function(a){this.element.bfDropDownList({items:a})}})},
getEventMap:function(){return{enterDropdown:[h.ut.XfaUtil.prototype.XFA_ENTER_EVENT,h.ut.XfaUtil.prototype.XFA_PREOPEN_EVENT],changeDropdown:h.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,exitDropdown:h.ut.XfaUtil.prototype.XFA_EXIT_EVENT}},getCommitValue:function(){var c="";this.element.find("li[aria-checked\x3dtrue]").each(function(){c+=b(this).attr("data-save")+"\n"});c=c.replace(/^\s+|\s+$/g,"");this.element.trigger("tableValuesChanged",c);return c},render:function(){var b=parseInt(guideBridge.resolveNode("brochure_selection").jsonModel.maxListItemsAllowed);
this.options.maxListItemsAllowed=b?b:0;this.element.bfDropDownList({displayValue:null,editable:!1,hasGroups:!1,isValid:!0,maxItems:this.options.maxListItemsAllowed,multiSelect:!0,placeholder:"",selectedItemsAlignment:"horizontal",value:[null]});this.element.closest(".brochure_selection").find(".guideFieldLabel label").text(this.options.placeholder);this.element.find(".bfDropDownList__mobile-placeholder").text(this.options.placeholder);this.element.append(this.tableSkeleton);this._registerEvents();
return this.element},_registerEvents:function(){var c=this;this.element.on("changeDropdown",function(a){c.element.trigger("exitDropdown");c.element.find(".bfDropDownList--multiselect").attr("aria-expanded","false");c.disableDropdown(c)});this.element.on("tableValuesChanged",function(a,d){c.element.find(".bf-brochureselection-list").empty();""!==d&&(a=d.split("\n"),b.each(a,function(a,b){c.element.find(".bf-brochureselection-list").append('\x3cli class\x3d"bf-brochureselection-listItem" data-save\x3d"'+
b+'"\x3e\x3cspan\x3e'+c.element.find('li[data-save\x3d"'+b+'"] span').text()+'\x3c/span\x3e\x3cspan class\x3d"bf-brochureselection-listItem-remove" data-save\x3d"'+b+'"\x3e\x3c/span\x3e\x3c/li\x3e');c.element.find('.bfDropDownList__inner-container li[data-save\x3d"'+b+'"]').attr("aria-checked","true")}),c.disableDropdown(c))});this.element.on("click",".bf-brochureselection-listItem-remove",function(){c.element.find('.bfDropDownList__scroll-container li[data-save\x3d"'+b(this).attr("data-save")+'"]').trigger("click")})},
disableDropdown:function(b){var a=b.element.find('.bfDropDownList__scroll-container li[aria-checked\x3d"true"]').length;b.options.maxListItemsAllowed===a?(b.element.find(".bfDropDownList--multiselect").addClass("disabled"),b.element.parent().find(".guideFieldLabel.in-field").addClass("label-disabled")):(b.element.find(".bfDropDownList--multiselect").removeClass("disabled"),b.element.parent().find(".guideFieldLabel.in-field").removeClass("label-disabled"))}})})($,_,xfalib);
(function(b){b.widget("xfaWidget.bfRadioTabs",b.xfaWidget.XfaCheckBox,{_widgetName:"bfRadioTabs",checkedState:!1,render:function(){var g=this.element.closest(".guideRadioButtonGroupItems");if(!g.data("radioTabsInitialized")){var h=g.children(".guideRadioButtonItem").length;g.data("radioTabsInitialized",!0);g.after(b('\x3cspan class\x3d"bf-radio-tabs-bar"\x3e\x3c/span\x3e').css("width",100/h+"%").hide())}return this._super()},getOptionsMap:function(){var g=this._super();return b.extend({},g,{displayValue:function(b){g.displayValue.apply(this,
arguments);if(this.checkedState){var c=this.element.closest(".guideRadioButtonItem"),a=c.closest(".guideRadioButtonGroupItems");c=c.prevAll(".guideRadioButtonItem").length;var d=a.children(".guideRadioButtonItem").length;a.nextAll(".bf-radio-tabs-bar").css("left",100/d*c+"%").show()}}})},_initializeEventHandlers:function(){this._super();this.find(".brochureTypeToggle").on("click",function(){}.bind(this))}})})($);
(function(b){var g=xfalib.ut.XfaUtil.prototype;b.widget("xfaWidget.labeledImageChoiceWidget",b.xfaWidget.imageCheckRadioButtonWidget,{_widgetName:"labeledImageChoiceWidget",_urlLabelMatcher:/^([^#]*)#?(.*)$/,_getItemSkeleton:function(b){return'\x3cdiv class\x3d"'+("radio"===b?"guideRadioButtonItem":"guideCheckBoxItem")+' {NAME_PLACEHOLDER}" data-original-title\x3d"" title\x3d"" \n    role\x3d"'+("radio"===b?"radio":"checkbox")+'" aria-labelledby\x3d"{TEMPLATE_ID_PLACEHOLDER}_{COUNTER_PLACEHOLDER}_label"\x3e\n    \x3cdiv class\x3d"guideLabeledImageChoice__image-with-caption-group"\x3e\n        \x3cimg class\x3d"guideLabeledImageChoice__image" src\x3d"{IMAGESRC_PLACEHOLDER}" alt\x3d""/\x3e\n        \x3cdiv class\x3d"guideLabeledImageChoice__caption"\x3e\n            \x3cdiv class\x3d"guideFieldWidget guideLabeledImageChoice__group labeledImageChoiceWidget" data-id\x3d"{COUNTER_PLACEHOLDER}" data-af-widgetname\x3d"labeledImageChoiceWidget" data-original-title\x3d"" title\x3d""\x3e\n                \x3cinput type\x3d"'+
b+'" id\x3d"{TEMPLATE_ID_PLACEHOLDER}_{COUNTER_PLACEHOLDER}_widget" name\x3d"{TEMPLATE_ID_PLACEHOLDER}_jqName" value\x3d"-100" aria-label\x3d"{LABELTEXT_PLACEHOLDER}" aria-selected\x3d"false" placeholder\x3d"" style\x3d"position: relative;"\x3e\n                \x3cdiv class\x3d"bf-imageselect-icon"\x3e\x3c/div\x3e\n                \x3cdiv class\x3d"guideWidgetLabel" id\x3d"{TEMPLATE_ID_PLACEHOLDER}_{COUNTER_PLACEHOLDER}_label"\x3e{LABELTEXT_PLACEHOLDER}\x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e'},
getOptionsMap:function(){var g=this._superApply(arguments);return b.extend({},g,{access:function(b){g.access.apply(this,arguments);var a=this.$userControl.parents(".guideRadioButtonItem, .guideCheckBoxItem");switch(b){case "open":a.removeClass("imageCheckButtonDisabled");break;case "nonInteractive":case "protected":case "readOnly":a.addClass("imageCheckButtonDisabled");break;default:a.removeClass("imageCheckButtonDisabled")}},screenReaderText:function(b){b&&this.$userControl.attr("aria-label",this._urlLabelMatcher.exec(b)[2])}})},
render:function(){null===g.getLogger()&&(g.logger={debug:function(){}});var h=this._superApply(arguments),c=h.closest(".guideCheckBoxGroupItems, .guideRadioButtonGroupItems");if(!c.data("labeledImageChoiceInitialized"))c.data("labeledImageChoiceInitialized",!0).on("click",function(a){a=b(a.target);var c=a.closest(".guideRadioButtonItem, .guideCheckBoxItem");c.length&&!a.is("input, .guideWidgetLabel")&&c.find("input").trigger("click")});return h},escapeHTML:function(b){return document.createElement("div").appendChild(document.createTextNode(b)).parentNode.innerHTML},
renderGroupItem:function(b){var c=this._superApply(arguments),a=guidelib.util.GuideUtil,d=this._urlLabelMatcher.exec(b.displayValue);c=a.replaceAll(c,"{IMAGESRC_PLACEHOLDER}",d[1]);return c=a.replaceAll(c,"{LABELTEXT_PLACEHOLDER}",this.escapeHTML(d[2]))}})})($);
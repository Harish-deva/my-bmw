define("business/commons/TrackingAdapter",function(){function g(a){function b(){var b=a.getPageObject(a.getCurrentPageIndex());return{eventInfo:{cause:"",effect:"",element:"",eventAction:"",eventName:"",eventPoints:"",target:"",timeStamp:Date.now().toString()},category:{primaryCategory:"",mmdr:b.category&&b.category.mmdr?b.category.mmdr:"",eventType:"triggered"},attributes:{relatedPageName:b.pageName||"",relatedPageCategory:b.category||{},relatedComponent:{componentInfo:{},category:{},attributes:{}}}}}
return{apply:function(){return{delayed:function(a){a.category.eventType=TC.DELAYED;return this},relatedComponent:function(a,b){a.attributes.relatedComponent=b;return this},relatedPageName:function(a,b){a.attributes.relatedPageName=b;return this},relatedPageCategory:function(a,b){a.attributes.relatedPageCategory=b;return this}}},newEvent:function(a){var c=b();a&&(c=f(!0,{},c,a));return{build:function(){return c},relatedComponentID:function(a){c.attributes.relatedComponentID=a;return this},eventAction:function(a){c.eventInfo.eventAction=
a;return this},eventName:function(a){c.eventInfo.eventName=a;return this},eventPoints:function(a){c.eventInfo.eventPoints=a.toString();return this},primaryCategory:function(a){c.category.primaryCategory=a;return this},subCategory01:function(a){c.category.subCategory01=a;return this},target:function(a){c.eventInfo.target=a;return this},effect:function(a){c.eventInfo.effect=a;return this},cause:function(a){c.eventInfo.cause=a;return this}}}}}function k(){return{options:function(){var a=!0,b="",d=!0,
c="click",e=!1;return{active:function(b){a=b;return this},build:function(){return{active:a,name:b,timing:d,type:c,useTimer:e}},name:function(a){b=(a||"").toLowerCase().replace(/\s+/g,"_");return this},timing:function(a){d=a;return this},type:function(a){c=a;return this},useTimer:function(a){e=a;return this}}}}}function f(){var a={},b=!1,d=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],d++);for(;d<arguments.length;d++){var c=void 0,e=arguments[d];for(c in e)Object.prototype.hasOwnProperty.call(e,
c)&&(b&&"[object Object]"===Object.prototype.toString.call(e[c])?a[c]=f(!0,a[c],e[c]):a[c]=e[c])}return a}var h=function(){this.pageObject=this.optionsBuilder=this.eventBuilder=this.api=null;this.isEventCookieSaveCapable=!1;this.initTracking()};h.prototype={initTracking:function(){if(window.digital&&window.digital.tracking&&"function"===typeof window.digital.tracking.getInstance){var a=window.digital.tracking.getInstance(window.dataLayer);a.isMinimalInterface||(this.api=a,this.isEventCookieSaveCapable=
!1)}else this.api=window.digital&&window.digital.tracking&&window.digital.tracking.lib,this.isEventCookieSaveCapable=!0;if(this.api){if(a=this.api.getCurrentPageIndex())this.pageObject=this.api.getPageObject(a);this.eventBuilder=g(this.api)}this.initMinimalTrackingInterface()},getOptionsBuilder:function(){null===this.optionsBuilder&&(this.optionsBuilder=new k);return this.optionsBuilder},getPageObject:function(){if(!this.isInitialized())return{};this.pageObject&&this.pageObject.page||(this.pageObject=
this.api.getPageObject(this.api.getCurrentPageIndex()));return this.pageObject},getEventBuilder:function(){if(this.eventBuilder)return this.eventBuilder;window.digitals2&&window.digitals2.tracking&&window.digitals2.tracking.api&&(this.eventBuilder=window.digitals2.tracking.eventBuilder);return this.eventBuilder},trackEvent:function(a,b,d){if(this.isInitialized()){var c=f(!0,{},a,{eventInfo:{timeStamp:Date.now().toString()}});try{_.has(c,"category.eventType")&&"delayed"===c.category.eventType&&this.isEventCookieSaveCapable?
this.api.eventCookieSave(c):(this.api.addEventTracking(b,c,this.api.getCurrentPageIndex()),this.triggerSatelliteEvent(d))}catch(e){console.error("caught exception while tracking event",a,", exception was",e)}}},satelliteTrack:function(a){if(window._satellite&&window._satellite.track){var b=this.api.getCurrentPageIndex(),d=f(!0,{},getPageObject(b));window._satellite.track(a,[b,d])}else console.log("_satellite not defined")},triggerSatelliteEvent:function(a){document.dispatchEvent(new CustomEvent("digital:tracking:addEventSatellite",
{detail:{eventName:"digital:tracking:addEventSatellite",eventOptions:a},bubbles:!1,cancelable:!1}))},initComponentTracking:function(a,b){if(this.isInitialized())return this.api.initComponentTracking(a,this.api.getCurrentPageIndex(),b)},getTrackingDefaults:function(a){return{eventInfo:{eventName:"",eventAction:"click",eventPoints:"",cause:"default",effect:""},category:{primaryCategory:a.category.primaryCategory,subCategory01:a.category.subCategory01},attributes:{relatedComponentID:a.componentInfo.componentID,
relatedComponentName:a.componentInfo.componentName,relatedComponentPrimaryCategory:a.category.primaryCategory}}},isApiValid:function(){return null!==this.api&&void 0!==this.api},isInitialized:function(){this.isApiValid()||this.initTracking();return this.isApiValid()},getComponent:function(a){if(!this.isInitialized())return null;var b=this.api.getPageObject(this.api.getCurrentPageIndex());return b.component?b.component[a]:null},newEvent:function(a){return this.getEventBuilder().newEvent(a)},applyEventComponentProperties:function(a,
b,d){this.eventBuilder.apply().relatedComponent(a,b);d&&(b=this.getPageObject())&&(this.eventBuilder.apply().relatedPageCategory(a,b.page.category),this.eventBuilder.apply().relatedPageName(a,b.page.pageInfo.pageName))},updateComponentTracking:function(a,b){this.isInitialized()&&this.api.updateComponentTracking(a,b,this.api.getCurrentPageIndex())},buildOptions:function(a){var b=this.getOptionsBuilder();return b?(b=b.options(),b.name(a),b.build()):null},initMinimalTrackingInterface:function(){window.digital=
window.digital||{};window.digital.tracking=window.digital.tracking||{};if(!window.digital.tracking.getInstance){var a=this;window.digital.tracking.getInstance=function(){return a.getMinimalInterfaceObject()}}},getMinimalInterfaceObject:function(){var a=this;return{getPageObject:function(b){return a.isInitialized()?a.api.getPageObject(b):{}},getCurrentPageIndex:function(){return a.isInitialized()?a.api.getCurrentPageIndex():0},addEventTracking:function(b,d,c){if(a.isInitialized())return a.api.addEventTracking(b,
d,c)},initComponentTracking:function(b,d){if(a.isInitialized())return a.api.initComponentTracking(b,d)},isMinimalInterface:function(){return!0}}}};return new h});require(["business/commons/TrackingAdapter"],function(g){});
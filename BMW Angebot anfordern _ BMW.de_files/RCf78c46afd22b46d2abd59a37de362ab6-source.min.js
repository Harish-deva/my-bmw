// For license information, see `https://assets.adobedtm.com/717b2dc27cb7/98ec5bd2d010/d3c381bd1eca/RCf78c46afd22b46d2abd59a37de362ab6-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/717b2dc27cb7/98ec5bd2d010/d3c381bd1eca/RCf78c46afd22b46d2abd59a37de362ab6-source.min.js', "const dl=event.detail;let pageType=dl.get(\"page.category.pageType\");pageType&&adobeDataLayer.extEvntData.cache.assign(\"page.extra.pageType\",pageType);let sysEnv=dl.get(\"page.pageInfo.sysEnv\");sysEnv&&adobeDataLayer.extEvntData.cache.assign(\"page.extra.sysEnv\",sysEnv);const regexpPageInstanceId=/\\/content\\/(bmw|mini|bmwmotorradnsc)\\//;let pageInstanceId=dl.get(\"page.pageInfo.pageID\"),pageInstanceIdIsValid=regexpPageInstanceId.test(pageInstanceId);if(pageInstanceIdIsValid||(pageInstanceId=adobeDataLayer.extEvntData.cache.get(\"page.extra.pageID\"),pageInstanceIdIsValid=!!pageInstanceId),pageInstanceIdIsValid){try{let e=pageInstanceId?.split(\"/\");if(e.shift(),e.some((e=>0===e.length))){if(pageInstanceId=adobeDataLayer.extEvntData.cache.get(\"page.extra.pageID\"),!pageInstanceId)return;dl.assign(\"page.pageInfo.pageID\",pageInstanceId),e=pageInstanceId.split(\"/\")}else e.unshift(\"\"),adobeDataLayer.extEvntData.cache.assign(\"page.extra.pageID\",pageInstanceId);let a=e.length,t=e[2],n=e[3].slice(6),g=e[5].slice(0,2),s=e[6],p=e[7]||\"\",o=e[8]||\"\",l=e[9]||\"\",r=e[a-1];if(7==a&&\"all-models-prod\"==e[6]?(s=\"showroom\",p=\"content\",r=\"all models overview\"):(r.includes(\"home\")||r.includes(\"index-prod\")||r.includes(\"index\"))&&(s=\"homepage\",p=\"content\",r=\"homepage\"),\"all-models\"===s)s=\"showroom\";if(\"showroom\"==s&&8===a)s=\"series overview\";\"\"!==pageInstanceId&&dl.mergeDeep({page:{pageInfo:{geoRegion:n.toUpperCase(),language:g.toLowerCase(),pageID:dl.get(\"page.pageInfo.pageID\"),pageName:r.replaceAll(\"-\",\" \"),sysEnv:dl.get(\"page.pageInfo.sysEnv\")||adobeDataLayer.extEvntData.cache.get(\"page.extra.sysEnv\")},category:{pageType:dl.get(\"page.category.pageType\")||adobeDataLayer.extEvntData.cache.get(\"page.extra.pageType\"),primaryCategory:s.replaceAll(\"-\",\" \").toLowerCase(),subCategory1:p.replaceAll(\"-\",\" \").toLowerCase(),subCategory2:o.replaceAll(\"-\",\" \").toLowerCase(),subCategory3:l.replaceAll(\"-\",\" \").toLowerCase()},attributes:{brand:t}}}),\"pageview\"!==dl.get(\"event\")||dl.get(\"eventInfo.effect\")||dl.assign(\"eventInfo.effect\",\"page: \"+r.replaceAll(\"-\",\" \").toLowerCase()+\" shown\")}catch(e){_satellite.logger.error(e,event.$rule.name)}dl.push(\"eventInfo.state\",event.$rule)}");
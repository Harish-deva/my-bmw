// For license information, see `https://assets.adobedtm.com/717b2dc27cb7/f6f10f796b8e/1f1c45c7b2e5/RC608f33a57082400ea564b966ebd0b835-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/717b2dc27cb7/f6f10f796b8e/1f1c45c7b2e5/RC608f33a57082400ea564b966ebd0b835-source.min.js', "function getParsedCookie(e){var i=window.epaas.api.getPersistence(e);return JSON.parse(i)||{}}function initialV(){try{var e=getParsedCookie(\"visitor_aa_hits\"),i=e.vNum?e.vNum:1;e.vNum=i,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(e))}catch(e){_satellite.logger.error(\"Error in visit function- \",e)}}function cluster(){try{var e;\"bmw.es\"==_satellite.getVar(\"topLevelDomain\")?e=_satellite.getVar(\"Cluster_ES_VibeSegments\"):\"bmw.fr\"==_satellite.getVar(\"topLevelDomain\")?e=_satellite.getVar(\"Cluster_FR_VibeSegments\"):\"bmw.it\"==_satellite.getVar(\"topLevelDomain\")?e=_satellite.getVar(\"Cluster_IT_VibeSegments\"):\"bmw.de\"==_satellite.getVar(\"topLevelDomain\")&&(e=_satellite.getVar(\"Cluster_DE_VibeSegments\"));var i=getParsedCookie(\"visitor_aa_hits\");(i.cur?i.cur:\"\").seg=e,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(i))}catch(e){_satellite.logger.error(\"Error in cluster function- \",e)}}function vibeScore(){try{var e=getParsedCookie(\"v_reco_data\"),i=getParsedCookie(\"visitor_aa_hits\"),t=i&&i.cur?i.cur:\"\";if(i.hasOwnProperty(\"pre\")||(i.pre={}),t){var s=t.sco?t.sco:\"\";console.log(\"THREE-\"+JSON.stringify(s)),s?(t.sco.SFB=e.SFB,t.sco.rfi=e.rfi,t.sco.rfo=e.rfo,t.sco.tda=e.tda,t.sco.vco=e.vco):(t.sco={},t.sco.SFB=e.SFB,t.sco.rfi=e.rfi,t.sco.rfo=e.rfo,t.sco.tda=e.tda,t.sco.vco=e.vco),window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(i))}}catch(e){_satellite.logger.error(\"Error in vibescore function- \",e)}}function timeSession(){try{var e=getParsedCookie(\"visitor_aa_hits\"),i=getParsedCookie(\"v_reco_data\"),t=e&&e.cur?e.cur:\"\",s=t.time?t.time:\"\";if(t){if(s)if(Date.now()/1e3/60-s>30){var r=e&&e.pre?e.pre:\"\";if(i={},window.epaas.api.setPersistence(\"v_reco_data\",JSON.stringify(i)),r){r.time=t.time,r.seg=t.seg,r.sco=t.sco,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(e)),t.time=Date.now()/1e3/60;var a=e.vNum?e.vNum+1:1;e.vNum=a,e.tSpe={},window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(e)),cluster(),vibeScore()}else{var o=getParsedCookie(\"visitor_aa_hits\");o.pre={},cluster(),vibeScore(),initialV(),window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(o))}}else t.time=Date.now()/1e3/60,e.cur=t,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(e)),initialV(),cluster(),vibeScore();else t.time=Date.now()/1e3/60,e.cur=t,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(e)),initialV(),cluster(),vibeScore()}else{var n=getParsedCookie(\"visitor_aa_hits\");n.cur={},n.cur.time=Date.now()/1e3/60,window.epaas.api.setPersistence(\"visitor_aa_hits\",JSON.stringify(n)),initialV(),cluster(),vibeScore()}}catch(e){_satellite.logger.error(\"Error in time session function- \",e)}}timeSession();");